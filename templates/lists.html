{% extends 'layout.html' %}

{% block content %}
    <p>
        <table>
            <tr>
                <td width="1050">
                    <form method="get">
                        <label for="order_by">Order by</label>
                        <select name="order_by" id="order_by">
                            {% for option, option_text in {'title': 'title', 'submission_time': 'submission time', 'message': 'message', 'view_number': 'number of views', 'vote_number': 'number of votes'}.items() %}
                                <option name="{{ option }}" value="{{ option }}" {{ 'selected' if option == order_by }}>{{ option_text }}</option>
                            {% endfor %}
                        </select>
                            <label for="order_direction"></label><select name="order_direction" id="order_direction">
                            <option name="asc" value="asc" {{ 'selected' if order_direction == 'asc' }}>ascending</option>
                            <option name="desc" value="desc" {{ 'selected' if order_direction == 'desc' }}>descending</option>
                        </select>
                        <button type="submit">SORT</button>
                    </form>
                </td>
                <td>
                    <form action="{{ url_for('route_search') }}" method="get">
                        <input type="search" placeholder="Search" name="search" id="search">
                        <button type="submit">Search</button>
                    </form>
                </td>
            </tr>
        </table>
    </p>
{% for quest in question %}
    <div id="question_listed">
        <table>
            <tr>
                <td><h5>ID:</h5></td>
                <td  width="50">{{ quest['id'] }}</td>
                <td><h5>Title:</h5></td>
                <td  width="300"><a href="{{ url_for('view_up', question_id=quest['id']) }}">{{ quest['title'] | safe }}</a></td>
                <td><h5>Submission time:</h5></td>
                <td  width="150">{{ quest['submission_time'] }}</td>
                <td><h5>View:</h5></td>
                <td  width="50">{{ quest['view_number'] }}</td>
                <td><h5>Like:</h5></td>
                <td  width="20">{{ quest['vote_number'] }}</td>
            </tr>
        </table>
        <table>
            <tr>
                <td><h5>Message:</h5></td>
                <td width="1000">{{ quest['message'] | safe }}</td>
                {% if quest['image'] is not none %}
                    <td><img src="{{ quest['image'] }}" alt="image" height="300" width="260"></td>
                {% endif %}
            </tr>
        </table><br>
        <table>
            <tr>
                <td width="100"><h5>Tags:</h5></td>
                {% for tag in tags %}
                    {% if tag['question_id'] == quest['id'] %}
                        <td><h6><a href="{{ url_for('search_with_tag', tag_id=tag['id']) }}"><ins>{{ tag['name'] }}</ins></a>
                            <sup><a href="{{ url_for('delete_tag', question_id=quest['id'], tag_id=tag['id']) }}">x</a></sup></h6></td>
                    {% endif %}
                {% endfor %}
            </tr>
            <tr>
                <td><a href="{{ url_for('add_tag', question_id=quest['id']) }}"><h6>Add new tag</h6></a></td>
            </tr>
        </table>

    </div>
    {% endfor %}
{% endblock %}