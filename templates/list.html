<!doctype html>
<head>
    <title>List Questions</title>

</head>
<body>
    <h1>Questions</h1>
    <form action = "{{url_for('route_questions')}}" method = 'POST'>
        <p>Order by:</p>
        <select name = "order_by">
            {% for key,value in user_questions[0].items() %}
                    <option value = "{{key}}" {{"selected" if order_by == key }}> {{ key|replace("_"," ")|title }}</option>
                {% endfor %}
        </select>
        <select name = "order_direction">
            <option {{"selected" if order_direction == "asc" }} value = "asc">ascending</option>
            <option {{"selected" if order_direction == "desc"}} value = "desc">descending</option>
        </select>
        <button type = "submit">Sort</button>
        </form>
    <table>

        <thead>
            <tr>
                {% for key,value in user_questions[0].items() %}
                    <th> {{ key|replace("_"," ")|title }}</th>
                {% endfor %}
            </tr>
        </thead>

        <tbody>

            {% for question in user_questions %}
               <tr>
                   {% autoescape false %}
                       {% for key,value in question.items() %}
                           {% if key == "image" %}
                                <td><img width="20" height = "20"  src = " {{ value }}"></td>
                           {% elif key == "vote_number" %}
                               <td>{{value}}
                               <a href = "{{url_for('route_vote', vote = 'vote-up', question_id = question.id)}}"><img width="20" height = "20" src = "/static/vote_up.png" alt = "vote_up"></a>
                               <a href = "{{url_for('route_vote', vote = 'vote-down', question_id = question.id)}}"><img width="20" height = "20"  src = "/static/vote_down.png" alt = "vote_down"></a></td>
                           {% elif key == "title" %}
                                <td><a href = "{{ url_for('route_question_with_answer',question_id = question.id) }}">{{ value }}</a></td>
                           {% else %}
                                <td>{{ value}} </td>
                           {% endif %}

                       {% endfor %}
                   {% endautoescape %}
               </tr>
            {% endfor %}

        </tbody>
    </table>
    <p><a href="/add-question">Post a new question</a></p>


</body>